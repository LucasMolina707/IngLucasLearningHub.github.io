<!DOCTYPE html>
<html lang="es" data-lang="es" dir="ltr">
<head>
  <!-- ============================================================
       404 · Ing. Lucas Learning Hub (patrón + cielo + choque 404)
       ============================================================ -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="dark light" />
  <meta name="application-name" content="Ing. Lucas Learning Hub" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="mobile-web-app-capable" content="yes" />
  <title>404 · Página no encontrada — Ing. Lucas Learning Hub</title>
  <meta name="description" content="No encontramos esta página. Mira la animación y vuelve al inicio." />
  <meta name="robots" content="noindex, follow" />
  <meta name="theme-color" content="#0d47a1" />

  <!-- Iconos -->
  <link rel="icon" href="/galeria/logo/logoinglucas.ico" sizes="any">
  <link rel="icon" type="image/svg+xml" href="/galeria/logo/logoinglucas.svg">
  <link rel="apple-touch-icon" sizes="180x180" href="/galeria/logo/logoinglucas.png">

  <style>
    /* =================== Variables/base =================== */
    :root{
      --blue-900:#0b1730; --blue-800:#0f2346; --blue-700:#153769; --blue-600:#1c4b8c; --blue-500:#2563eb; --blue-400:#60a5fa;
      --purple-600:#7c3aed; --cyan-400:#22d3ee; --lime-400:#a3e635;
      --bg:#0e1116; --panel-2:#0f1722; --border:#263349; --text:#ecf3ff; --muted:#b4c2d6;
      --radius:16px; --shadow:0 12px 28px rgba(0,0,0,.35);
      --container:1100px;
      --logo-url: url("/galeria/logo/logoinglucas.svg");      /* patrón + objetivo */
      --ship-url: url("/galeria/space/ESPACIAL.svg");         /* nave espacial     */
      --sat-url:  url("/galeria/space/SATELI02.svg");         /* satélite          */
      --accent-ring: 0 0 0 3px rgba(34,211,238,.25);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;
      color:var(--text);
      background:linear-gradient(180deg,var(--panel-2),#0b1220);
      overflow-x:hidden;
    }
    a{color:var(--blue-400); text-decoration:none}
    .wrap{max-width:var(--container); margin:0 auto; padding:0 20px}

    /* =================== Patrón de logo de fondo =================== */
    body::before{
      content:""; position:fixed; inset:0; pointer-events:none; z-index:0;
      background-image: var(--logo-url);
      background-repeat: repeat;
      background-size: 90px 90px;
      opacity:.055; filter:grayscale(1) contrast(1.05);
    }

    /* =================== Cielo espacial con estrellas =================== */
    .sky{position:fixed; inset:0; z-index:0; pointer-events:none}
    /* Capa nebulosa/pulso */
    .sky::before{
      content:""; position:absolute; inset:0;
      background:
        radial-gradient(1200px 700px at 50% -10%, rgba(37,99,235,.15), transparent 65%),
        radial-gradient(800px 500px at 20% 120%, rgba(124,58,237,.12), transparent 70%),
        radial-gradient(900px 600px at 80% 120%, rgba(34,211,238,.10), transparent 70%);
      animation: skyPulse 6s ease-in-out infinite alternate;
    }
    /* Estrellas (patrón punteado animado) */
    .sky::after{
      content:""; position:absolute; inset:0; opacity:.65;
      background-image:
        radial-gradient(1px 1px at 10% 20%, #fff 50%, transparent 51%),
        radial-gradient(1px 1px at 30% 80%, #fff 50%, transparent 51%),
        radial-gradient(1px 1px at 70% 30%, #fff 50%, transparent 51%),
        radial-gradient(1px 1px at 80% 60%, #fff 50%, transparent 51%),
        radial-gradient(1px 1px at 50% 50%, #fff 50%, transparent 51%),
        radial-gradient(1px 1px at 90% 10%, #fff 50%, transparent 51%),
        radial-gradient(1px 1px at 20% 50%, #fff 50%, transparent 51%);
      background-size: 400px 400px, 600px 600px, 500px 500px, 550px 550px, 450px 450px, 650px 650px, 700px 700px;
      background-repeat: repeat;
      animation: twinkle 8s linear infinite;
    }
    @keyframes skyPulse{ from{filter:brightness(.95)} to{filter:brightness(1.05)} }
    @keyframes twinkle{
      0%{opacity:.45; transform:translate3d(0,0,0)}
      50%{opacity:.75}
      100%{opacity:.45; transform:translate3d(-20px,-20px,0)}
    }

    /* =================== I18N =================== */
    html[data-lang="es"] .i18n-en{display:none!important}
    html[data-lang="en"] .i18n-es{display:none!important}

    /* =================== Topbar =================== */
    .topbar{ position:sticky; top:0; z-index:60; backdrop-filter:saturate(1.1) blur(8px); background:rgba(13,18,30,.75); border-bottom:1px solid var(--border)}
    .topbar .row{display:flex; align-items:center; gap:12px; padding:12px 0}
    .logo{ width:36px; height:36px; border-radius:10px; display:grid; place-items:center; overflow:hidden; background:linear-gradient(180deg,#0f172a,#0b1220); border:1px solid rgba(96,165,250,.25)}
    .logo img{width:100%; height:100%; object-fit:cover; display:block}
    .brand{display:flex; flex-direction:column}
    .brand strong{font-size:16px}
    .brand span{font-size:12px; color:var(--muted)}
    .actions{ margin-left:auto; display:flex; gap:10px; align-items:center }
    .icon-btn{
      --size:40px; width:var(--size); height:var(--size); display:inline-grid; place-items:center;
      border-radius:12px; border:1.5px solid var(--blue-500);
      background:linear-gradient(180deg,#0f172a,#0b1220);
      color:#e8f1ff; cursor:pointer; transition:transform .15s ease, filter .15s ease, box-shadow .15s ease;
      box-shadow:0 6px 20px rgba(0,0,0,.25);
    }
    .icon-btn:hover{ transform:translateY(-1px); filter:brightness(1.05)}
    .icon-btn:focus-visible{ outline:none; box-shadow:var(--accent-ring) }
    .icon-btn svg{ width:22px; height:22px; display:block }
    .lang-chip{font-size:12px; font-weight:700; letter-spacing:.3px}

    /* =================== Drawers =================== */
    .drawer{ position:fixed; z-index:70; inset:0 0 0 auto; width:320px; max-width:86vw; background:linear-gradient(180deg,#0e223a,#0a1729); border-left:2px solid var(--blue-500); box-shadow:-20px 0 40px rgba(0,0,0,.45); transform:translateX(100%); transition:.25s ease transform }
    .drawer.open{transform:translateX(0)}
    .drawer .hd{display:flex; align-items:center; justify-content:space-between; padding:14px 16px; border-bottom:1px solid var(--border)}
    .drawer .bd{padding:12px 16px; display:grid; gap:16px}
    .nav-group{border:1px solid var(--border); border-radius:12px; overflow:hidden}
    .nav-group h4{margin:0; padding:10px 12px; font-size:13px; color:var(--muted); background:#111826; border-bottom:1px solid var(--border)}
    .nav{display:grid}
    .nav a{padding:12px 12px; border-top:1px solid var(--border)}
    .nav a:hover{background:rgba(37,99,235,.18)}

    .comments-drawer{ position:fixed; z-index:80; inset:0 auto 0 0; width:420px; max-width:92vw; background:linear-gradient(180deg,#0b1626,#0a1220); border-right:2px solid var(--blue-500); box-shadow:20px 0 40px rgba(0,0,0,.45); transform:translateX(-100%); transition:.25s ease transform; display:flex; flex-direction:column; }
    .comments-drawer.open{ transform:translateX(0) }
    .comments-drawer .hd{display:flex; align-items:center; justify-content:space-between; gap:10px; padding:12px 14px; border-bottom:1px solid var(--border)}
    .comments-drawer .bd{padding:10px 12px; overflow:auto; height:100%}
    @media (max-width:760px){
      .comments-drawer{inset:auto 0 0 0; width:100vw; height:60vh; border-right:none; border-top:2px solid var(--blue-500); box-shadow:0 -20px 40px rgba(0,0,0,.45); transform:translateY(100%)}
      .comments-drawer.open{transform:translateY(0)}
      .comments-drawer .bd{height:calc(60vh - 50px)}
    }

    /* =================== Escena de choque =================== */
    .stage{ position:relative; z-index:1; display:grid; place-items:center; padding:28px 0 8px}
    .target{
      position:relative; width:min(200px,42vw); aspect-ratio:1/1; border-radius:50%;
      background:radial-gradient(circle at 50% 50%, rgba(37,99,235,.25), rgba(15,23,42,.5) 55%, transparent 56%), rgba(15,23,42,.45);
      border:1px solid rgba(96,165,250,.35); display:grid; place-items:center; overflow:hidden;
      box-shadow:0 16px 36px rgba(0,0,0,.35);
    }
    .target img{ width:70%; height:70%; object-fit:contain; display:block; filter:drop-shadow(0 6px 14px rgba(37,99,235,.35)); transition:filter .3s ease }
    /* “sin señal” tras impacto */
    .target.nosignal img{ filter:grayscale(1) brightness(1.1) contrast(1.2) }
    .target::after{
      content:""; position:absolute; inset:-2px; opacity:0; pointer-events:none;
      background:
        repeating-linear-gradient( to bottom, rgba(255,255,255,.05) 0 2px, transparent 2px 4px),
        repeating-linear-gradient( to right,  rgba(255,255,255,.03) 0 2px, transparent 2px 4px);
      mix-blend-mode:overlay;
      animation: scanlines 2s linear infinite;
    }
    .target.nosignal::after{ opacity:.8 }
    @keyframes scanlines{
      0%{ background-position:0 0, 0 0 }
      100%{ background-position:0 12px, 12px 0 }
    }

    /* nave y satélite */
    .ship, .sat{ position:absolute; width:84px; height:84px; background-size:contain; background-repeat:no-repeat; filter:drop-shadow(0 6px 12px rgba(0,0,0,.45)) }
    .ship{ background-image: var(--ship-url); transform-origin:center; animation: shipIn 2.2s cubic-bezier(.19,1,.22,1) .3s forwards }
    .sat{  background-image: var(--sat-url);  animation: satOrbit 2.6s ease-in-out 0s infinite alternate }

    @keyframes shipIn{
      0%{ transform:translate(-40vw,-20vh) rotate(18deg) scale(.9) }
      60%{ transform:translate(-8vw,-2vh) rotate(12deg) scale(1) }
      75%{ transform:translate(0,0) rotate(0deg) }
      100%{ transform:translate(6vw,2vh) rotate(-8deg) } /* cerca del objetivo */
    }
    @keyframes satOrbit{
      0%{ transform:translate(18vw,-6vh) rotate(12deg) }
      100%{ transform:translate(6vw,10vh) rotate(-10deg) }
    }

    /* explosión y sacudida */
    .boom{
      position:absolute; width:18px; height:18px; border-radius:50%; background:radial-gradient(circle, #fff, #ffd159 45%, rgba(255,0,0,.6) 60%, transparent 62%);
      opacity:0; transform:scale(.2); pointer-events:none; filter:blur(.5px);
      animation: none;
    }
    .boom.show{ animation: boomFx .6s ease-out forwards }
    @keyframes boomFx{
      0%{ opacity:1; transform:scale(.2) }
      60%{ opacity:.9; transform:scale(2.6) }
      100%{ opacity:0; transform:scale(3.2) }
    }
    .shake{ animation: shake .5s ease-in-out 2 }
    @keyframes shake{
      0%,100%{ transform:translate(0,0) }
      20%{ transform:translate(-3px,2px) }
      40%{ transform:translate(3px,-2px) }
      60%{ transform:translate(-2px,1px) }
      80%{ transform:translate(2px,-1px) }
    }

    /* =================== 404 con grietas =================== */
    .panel{position:relative; z-index:1}
    .card{
      background:linear-gradient(180deg,rgba(25,31,45,.96),rgba(18,23,33,.96));
      border:1px solid var(--border); border-radius:var(--radius); box-shadow:var(--shadow); padding:18px;
    }
    .hero{text-align:center; display:grid; gap:10px; border:1px dashed var(--border); border-radius:var(--radius); padding:20px}
    .code404{ font-size: clamp(48px, 9vw, 120px); line-height:1; margin:0; letter-spacing:2px; position:relative; display:inline-block; }
    .cracks{ position:absolute; left:50%; transform:translateX(-50%); width:min(520px,90vw); height:auto; pointer-events:none; top: 50%; translate: 0 -50%; opacity:0; }
    .cracks path{ stroke:#cfe3ff; stroke-width:2; fill:none; stroke-dasharray:180; stroke-dashoffset:180; }
    .crashed .cracks{ opacity:1 }
    .crashed .cracks path{ animation: drawCracks 1.8s ease-out forwards }
    @keyframes drawCracks{ to{ stroke-dashoffset:0 } }

    .lead{color:var(--muted); margin:0}
    .cta-row{display:flex; gap:10px; justify-content:center; flex-wrap:wrap; margin-top:10px}
    .btn-inline{
      padding:10px 14px; border-radius:12px; border:1px solid var(--border); background:rgba(18,23,31,.8);
      color:var(--text); cursor:pointer; text-decoration:none; display:inline-flex; align-items:center; gap:8px;
    }
    .btn-inline:hover{transform:translateY(-1px)}
    .btn-inline.primary{background:linear-gradient(180deg,var(--blue-600),var(--blue-500)); border-color:transparent}

    /* =================== Card con grid-effect (100 tiles) =================== */
    .card-effect{ display:grid; grid-template-columns:1fr; gap:12px; margin-top:14px }
    .card__img{ position:relative; border-radius:14px; overflow:hidden; border:1px solid var(--border); background:#0b1220 }
    .card__img img{ width:100%; display:block; object-fit:cover; opacity:.85; filter:contrast(1.1) saturate(1.05) }
    .card__grid-effect{
      position:absolute; inset:0; display:grid; grid-template-columns:repeat(10,1fr); grid-auto-rows:1fr;
    }
    .card__grid-effect-tile{
      display:block; position:relative; isolation:isolate;
      transition: background .15s ease, transform .15s ease;
    }
    .card__grid-effect-tile::after{
      content:""; position:absolute; inset:1px; border-radius:4px;
      background:rgba(96,165,250,.08); opacity:0; transition:opacity .15s ease;
      mix-blend-mode:screen;
    }
    .card__grid-effect-tile:hover{ transform:scale(1.015) }
    .card__grid-effect-tile:hover::after{ opacity:1 }
    .card__img a.full{ position:absolute; inset:0; z-index:2; }

    /* =================== Botón “fizzy” =================== */
    .fizzy{ display:grid; justify-items:center; gap:6px; margin-top:10px }
    .fizzy small{ color:var(--muted) }
    .fizzy input{ display:none }
    .fizzy label{
      --btnW: min(270px, 90vw);
      position:relative; width:var(--btnW); padding:12px 18px; border-radius:14px; cursor:pointer;
      display:inline-grid; grid-auto-flow:column; align-items:center; justify-content:center; gap:10px;
      background:linear-gradient(180deg,var(--blue-600),var(--blue-500)); color:#fff; border:1px solid rgba(255,255,255,.06);
      box-shadow:0 10px 26px rgba(0,0,0,.35);
      overflow:hidden; user-select:none;
    }
    .fizzy label .t{ font-weight:600 }
    .fizzy .spots{ position:absolute; inset:0; pointer-events:none }
    .fizzy .spot{
      position:absolute; width:6px; height:6px; border-radius:50%;
      background:radial-gradient(circle, #fff, rgba(255,255,255,.2) 60%, transparent 61%);
      transform:translate(var(--x,0), var(--y,0)) scale(0);
      opacity:0; filter:blur(.2px);
    }
    /* explosión de partículas al click (con clase .go) */
    .fizzy.go .spot{ animation: pop 700ms ease-out forwards }
    @keyframes pop{
      0%{ opacity:1; transform:translate(var(--x), var(--y)) scale(.2) }
      80%{ opacity:.9; transform:translate(calc(var(--x)*2.2), calc(var(--y)*2.2)) scale(1.8) }
      100%{ opacity:0; transform:translate(calc(var(--x)*3), calc(var(--y)*3)) scale(2.1) }
    }

    /* =================== Accesibilidad movimiento =================== */
    @media (prefers-reduced-motion: reduce){
      .ship,.sat,.boom,.sky::before,.sky::after,.card__grid-effect-tile,.fizzy .spot,.target::after{ animation:none !important }
    }
  </style>
</head>
<body>
  <!-- Cielo y patrón -->
  <div class="sky" aria-hidden="true"></div>

  <!-- =================== Topbar =================== -->
  <div class="topbar">
    <div class="wrap row">
      <a class="logo" href="/" aria-label="Inicio · Ing. Lucas Learning Hub">
        <picture>
          <source srcset="/galeria/logo/logoinglucas.svg" type="image/svg+xml">
          <img src="/galeria/logo/logoinglucas.png" alt="Logo Ing. Lucas" width="36" height="36" loading="eager" fetchpriority="high">
        </picture>
      </a>
      <div class="brand">
        <strong>Ing. Lucas Learning Hub</strong>
        <span class="i18n-es">Error 404</span>
        <span class="i18n-en">Error 404</span>
      </div>
      <div class="actions">
        <!-- Comentarios -->
        <button class="icon-btn" id="openComments" title="Abrir comentarios" aria-label="Abrir comentarios" aria-expanded="false" aria-controls="commentsDrawer">
          <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M20 2H4a2 2 0 0 0-2 2v16l4-4h14a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2z"/></svg>
        </button>
        <!-- Menú -->
        <button class="icon-btn" id="openDrawer" title="Abrir menú" aria-label="Abrir menú" aria-expanded="false" aria-controls="drawer">
          <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M3 6h18v2H3V6zm0 5h18v2H3v-2zm0 5h18v2H3v-2z"/></svg>
        </button>
        <!-- Idioma -->
        <button class="icon-btn" id="langToggle" title="Cambiar idioma" aria-label="Cambiar idioma" aria-pressed="false">
          <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20zm7.73 6h-3.46a15.9 15.9 0 0 0-1.6-3.63A8.03 8.03 0 0 1 19.73 8zM12 4c.88 0 2.39 1.88 3.23 4H8.77C9.61 5.88 11.12 4 12 4zM4.27 8A8.03 8.03 0 0 1 9.33 4.37 15.9 15.9 0 0 0 7.73 8H4.27zM4 10h3.16c-.08.66-.13 1.32-.13 2s.05 1.34.13 2H4a8 8 0 0 1 0-4zm.27 6h3.46c.4 1.28.95 2.49 1.6 3.63A8.03 8.03 0 0 1 4.27 16zM12 20c-.88 0-2.39-1.88-3.23-4h6.46C14.39 18.12 12.88 20 12 20zm2.67-.37c.65-1.14 1.2-2.35 1.6-3.63h3.46a8.03 8.03 0 0 1-5.06 3.63zM20 14h-3.16c.08-.66.13-1.32.13-2s-.05-1.34-.13-2H20a8 8 0 0 1 0 4z"/></svg>
          <span class="lang-chip" id="langChip" aria-hidden="true">ES</span>
        </button>
      </div>
    </div>
  </div>

  <!-- =================== Drawer Menú =================== -->
  <aside class="drawer" id="drawer" aria-label="Menú de navegación" aria-hidden="true">
    <div class="hd">
      <strong class="i18n-es">Navegación</strong>
      <strong class="i18n-en">Navigation</strong>
      <button class="btn" id="closeDrawer" aria-label="Cerrar" style="padding:8px 12px; border-radius:10px; border:1px solid var(--border); background:rgba(18,23,31,.6); color:#eaf2ff">Cerrar ✕</button>
    </div>
    <div class="bd">
      <div class="nav-group">
        <h4 class="i18n-es">Páginas</h4>
        <h4 class="i18n-en">Pages</h4>
        <nav class="nav" id="nav-pages"></nav>
      </div>
      <div class="nav-group">
        <h4 class="i18n-es">Ventanas / Proyectos</h4>
        <h4 class="i18n-en">Windows / Projects</h4>
        <nav class="nav" id="nav-projects"></nav>
      </div>
    </div>
  </aside>

  <!-- =================== Drawer Comentarios =================== -->
  <aside class="comments-drawer" id="commentsDrawer" aria-label="Comentarios" aria-hidden="true">
    <div class="hd">
      <strong class="i18n-es">Comentarios</strong>
      <strong class="i18n-en">Comments</strong>
      <button class="btn" id="closeComments" aria-label="Cerrar comentarios" style="padding:8px 12px; border-radius:10px; border:1px solid var(--border); background:rgba(18,23,31,.6); color:#eaf2ff">Cerrar ✕</button>
    </div>
    <div class="bd">
      <div id="commentsMount" aria-live="polite"></div>
    </div>
  </aside>

  <!-- =================== Escena: nave + satélite + logo =================== -->
  <section class="stage wrap" aria-label="Animación de impacto">
    <div class="target" id="target">
      <img src="/galeria/logo/logoinglucas.svg" alt="Logo Ing. Lucas">
      <div class="boom" id="boom"></div>
    </div>
    <!-- posiciones relativas — se ajustan via JS al centro -->
    <div class="ship" id="ship" aria-hidden="true"></div>
    <div class="sat"  id="sat"  aria-hidden="true"></div>
  </section>

  <!-- =================== Panel 404 =================== -->
  <section class="panel wrap" aria-live="polite" aria-atomic="true">
    <article class="card hero">
      <h1 class="code404" id="code404">404
        <!-- grietas SVG -->
        <svg class="cracks" viewBox="0 0 600 180" role="img" aria-label="Grietas">
          <path d="M300 10 L320 40 L310 70 L340 90" />
          <path d="M260 40 L240 70 L260 95 L245 120" />
          <path d="M350 55 L370 80 L360 105 L380 130" />
          <path d="M300 95 L290 120 L305 145 L295 165" />
        </svg>
      </h1>
      <p class="lead i18n-es">Parece que esta página se perdió en el espacio…</p>
      <p class="lead i18n-en">Looks like this page got lost in space…</p>

      <div class="cta-row">
        <a class="btn-inline primary" href="/" id="goHome">
          <span class="i18n-es">Volver al inicio</span>
          <span class="i18n-en">Go to home</span>
        </a>
        <a class="btn-inline" href="#" id="openCta">
          💬 <span class="i18n-es">Abrir comentarios</span>
          <span class="i18n-en">Open comments</span>
        </a>
        <button class="btn-inline" id="openMenu">
          ☰ <span class="i18n-es">Abrir menú</span>
          <span class="i18n-en">Open menu</span>
        </button>
      </div>

      <!-- Card con grid-effect que también lleva al inicio -->
      <div class="card-effect">
        <div class="card__img">
          <!-- Puedes reemplazar por cualquier imagen/cover (ej: un banner del hub) -->
          <img src="/galeria/logo/logoinglucas.svg" alt="Ir al inicio">
          <a class="full" href="/" aria-label="Ir al inicio ahora"></a>
          <div class="card__grid-effect" id="gridEffect" aria-hidden="true"></div>
        </div>
      </div>

      <!-- Botón “fizzy” con partículas -->
      <div class="fizzy" id="fizzyWrap">
        <small class="i18n-es">O prueba este botón con partículas 👇</small>
        <small class="i18n-en">Or try this particle button 👇</small>
        <input id="fizzy" type="checkbox" />
        <label for="fizzy" id="fizzyBtn" aria-label="Volver al inicio (fizzy)">
          <!-- icono simple -->
          <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M10 17l5-5-5-5v10z"/></svg>
          <span class="t i18n-es">Volver al inicio</span>
          <span class="t i18n-en">Go home</span>
          <div class="spots" id="spots"></div>
        </label>
      </div>
    </article>
  </section>

  <!-- =================== Footer =================== -->
  <footer style="border-top:1px solid var(--border); color:var(--muted); padding:22px 0; background:linear-gradient(180deg,#0f1624,#0c121e)">
    <div class="wrap" style="display:flex; justify-content:space-between; gap:12px; flex-wrap:wrap">
      <div>© <span id="y"></span> <strong>IngLucas</strong> · Colombia</div>
      <div><a href="/politicas-privacidad.html" style="color:inherit">Políticas de Privacidad</a></div>
    </div>
  </footer>

  <!-- =================== Scripts =================== -->
  <script>
    // Año footer
    document.getElementById('y').textContent = new Date().getFullYear();

    // Helpers
    const qs = s => document.querySelector(s);
    const $drawer = qs('#drawer');
    const $comments = qs('#commentsDrawer');
    const $btnDrawer = qs('#openDrawer');
    const $btnComments = qs('#openComments');
    const isDesktop = matchMedia('(hover:hover) and (pointer:fine)').matches;
    const isMobile  = matchMedia('(hover:none) and (pointer:coarse)').matches;

    function setOpen(el, btn, open){
      el.classList.toggle('open', open);
      el.setAttribute('aria-hidden', open ? 'false' : 'true');
      btn?.setAttribute('aria-expanded', open ? 'true' : 'false');
    }

    // ===== Menú
    const $closeDrawer = qs('#closeDrawer'); let drawerTimer = null;
    function openDrawer(){ setOpen($drawer,$btnDrawer,true); if(isMobile){ clearTimeout(drawerTimer); drawerTimer=setTimeout(()=>closeDrawer(),5000);} }
    function closeDrawer(){ setOpen($drawer,$btnDrawer,false); clearTimeout(drawerTimer); }
    $btnDrawer?.addEventListener('click', e=>{ e.stopPropagation(); ($drawer.classList.contains('open')?closeDrawer():openDrawer()); });
    $closeDrawer?.addEventListener('click', closeDrawer);
    if(isDesktop){ $btnDrawer?.addEventListener('mouseenter', openDrawer); $drawer?.addEventListener('mouseleave', closeDrawer); }
    document.addEventListener('click', e=>{ if($drawer.classList.contains('open') && !e.composedPath().includes($drawer) && !e.composedPath().includes($btnDrawer)) closeDrawer(); }, {passive:true});

    // ===== Comentarios (Utterances on demand)
    const $closeComments = qs('#closeComments');
    const $commentsMount = qs('#commentsMount');
    let commentsLoaded=false, inactivityTimer=null, lastActivity=Date.now();
    function injectUtterances(){
      if(commentsLoaded) return;
      const s=document.createElement('script');
      s.src='https://utteranc.es/client.js';
      s.setAttribute('repo','LucasMolina707/IngLucasLearningHub.github.io'); // <-- ajusta si usas otro repo
      s.setAttribute('issue-term','pathname');
      s.setAttribute('theme','icy-dark');
      s.setAttribute('crossorigin','anonymous');
      s.async=true;
      $commentsMount.appendChild(s);
      commentsLoaded=true;
    }
    function openComments(){ setOpen($comments,$btnComments,true); injectUtterances(); if(isDesktop) startInactivityWatcher(); }
    function closeComments(){ setOpen($comments,$btnComments,false); stopInactivityWatcher(); }
    $btnComments?.addEventListener('click', e=>{ e.stopPropagation(); ($comments.classList.contains('open')?closeComments():openComments()); });
    $closeComments?.addEventListener('click', closeComments);
    document.addEventListener('click', (e)=>{ if($comments.classList.contains('open') && !e.composedPath().includes($comments) && !e.composedPath().includes($btnComments)) closeComments(); }, {passive:true});
    function startInactivityWatcher(){ lastActivity=Date.now(); if(inactivityTimer) return; inactivityTimer=setInterval(()=>{ const idle=Date.now()-lastActivity, hov=$comments.matches(':hover'); if($comments.classList.contains('open') && idle>5000 && !hov){ closeComments(); } if(!$comments.classList.contains('open')) stopInactivityWatcher(); },500); }
    function stopInactivityWatcher(){ clearInterval(inactivityTimer); inactivityTimer=null; }
    ['mousemove','keydown','wheel','touchstart','touchmove'].forEach(evt=>document.addEventListener(evt,()=>{ lastActivity=Date.now(); },{passive:true}));

    // ===== I18N toggle (ES ↔ EN)
    (function(){
      const LANG_KEY='hubLang'; const $btn=qs('#langToggle'); const $chip=qs('#langChip');
      function setAriaForLang(L){
        const openCommentsBtn=qs('#openComments'); if(openCommentsBtn){ const t=L==='en'?'Open comments':'Abrir comentarios'; openCommentsBtn.title=t; openCommentsBtn.setAttribute('aria-label',t); }
        const openDrawerBtn=qs('#openDrawer'); if(openDrawerBtn){ const t=L==='en'?'Open menu':'Abrir menú'; openDrawerBtn.title=t; openDrawerBtn.setAttribute('aria-label',t); }
        const closeDrawerBtn=qs('#closeDrawer'); if(closeDrawerBtn){ closeDrawerBtn.setAttribute('aria-label', L==='en'?'Close':'Cerrar'); closeDrawerBtn.textContent = L==='en'?'Close ✕':'Cerrar ✕'; }
        const closeCommentsBtn=qs('#closeComments'); if(closeCommentsBtn){ closeCommentsBtn.setAttribute('aria-label', L==='en'?'Close comments':'Cerrar comentarios'); closeCommentsBtn.textContent = L==='en'?'Close ✕':'Cerrar ✕'; }
      }
      function applyLang(lang){
        const L=(lang==='en')?'en':'es';
        document.documentElement.setAttribute('data-lang',L);
        document.documentElement.setAttribute('lang',L);
        localStorage.setItem(LANG_KEY,L);
        $chip.textContent=L.toUpperCase();
        $btn.setAttribute('aria-label', L==='en'?'Switch language to Spanish':'Cambiar idioma a inglés');
        $btn.setAttribute('title', L==='en'?'Switch to Spanish':'Cambiar a English');
        $btn.setAttribute('aria-pressed', L==='en');
        setAriaForLang(L);
      }
      const saved=localStorage.getItem(LANG_KEY)||'es'; applyLang(saved);
      $btn?.addEventListener('click',()=>{ const cur=document.documentElement.getAttribute('data-lang')||'es'; applyLang(cur==='es'?'en':'es'); });
    })();

    // ===== Auto-menu desde /nav.json con fallback GitHub
    (async function initAutoMenu(){
      const elPages = document.getElementById('nav-pages');
      const elProjects = document.getElementById('nav-projects');
      const CACHE_KEY='navjson-cache', MAX_AGE=24*60*60*1000;
      async function githubFallback(){
        try{
          const owner='LucasMolina707', repo='IngLucasLearningHub.github.io', branch='main';
          const api=`https://api.github.com/repos/${owner}/${repo}/git/trees/${branch}?recursive=1`;
          const r=await fetch(api); const j=await r.json();
          const files=(j.tree||[]).filter(x=>x.type==='blob' && x.path.endsWith('.html'));
          const skip=p=>p.startsWith('templates/')||p.startsWith('multimedia/')||p.startsWith('galeria/')||p.startsWith('assets/')||p.includes('/draft');
          const pretty=s=>s.replace(/\.html$/,'').split('/').pop().replace(/[-_]+/g,' ').replace(/\b\w/g,c=>c.toUpperCase());
          const pages=[], projects=[];
          for(const f of files){
            if(skip(f.path)) continue;
            const item={ href:'/'+f.path, label:pretty(f.path) };
            if (f.path==='index.html' || f.path==='contacto.html' || f.path==='politicas-privacidad.html' || !f.path.includes('/')) pages.push(item);
            else projects.push(item);
          }
          pages.sort((a,b)=>a.label.localeCompare(b.label,'es'));
          projects.sort((a,b)=>a.label.localeCompare(b.label,'es'));
          pages.sort((a,b)=> a.href.endsWith('/index.html')||a.href==='/index.html' ? -1 : b.href.endsWith('/index.html')||b.href==='/index.html' ? 1 : 0);
          return {pages,projects};
        }catch(e){ return {pages:[],projects:[]}; }
      }
      async function fetchNav(){
        try{
          const cached=localStorage.getItem(CACHE_KEY);
          if(cached){ const obj=JSON.parse(cached); if(Date.now()-obj.ts<MAX_AGE && obj.data) return obj.data; }
          const res=await fetch('/nav.json',{cache:'no-cache'});
          if(!res.ok) throw new Error('nav.json unavailable');
          const data=await res.json(); localStorage.setItem(CACHE_KEY, JSON.stringify({ts:Date.now(), data})); return data;
        }catch(e){ const data=await githubFallback(); localStorage.setItem(CACHE_KEY, JSON.stringify({ts:Date.now(), data})); return data; }
      }
      function renderList(container, list){ if(!container) return; container.innerHTML=list.map(i=>`<a href="${i.href}">${i.label}</a>`).join(''); }
      try{ const nav=await fetchNav(); renderList(elPages, nav.pages||[]); renderList(elProjects, nav.projects||[]); }catch(e){}
    })();

    // ===== Card grid-effect: crear 100 tiles
    (function(){
      const grid = document.getElementById('gridEffect');
      if(!grid) return;
      const frag = document.createDocumentFragment();
      for(let i=0;i<100;i++){
        const a=document.createElement('a');
        a.className='card__grid-effect-tile';
        a.href='/';
        a.ariaLabel='Ir al inicio';
        frag.appendChild(a);
      }
      grid.appendChild(frag);
    })();

    // ===== Botón “fizzy”: 52 spots aleatorios + navegación
    (function(){
      const wrap = document.getElementById('fizzyWrap');
      const spots = document.getElementById('spots');
      if(!wrap || !spots) return;
      const N=52, W=260, H=44; // base aprox
      for(let i=0;i<N;i++){
        const s=document.createElement('span'); s.className='spot';
        const x=(Math.random()-.5)*W, y=(Math.random()-.5)*H;
        s.style.setProperty('--x', x+'px'); s.style.setProperty('--y', y+'px');
        spots.appendChild(s);
      }
      const label = document.getElementById('fizzyBtn');
      label?.addEventListener('click', (e)=>{
        e.preventDefault();
        wrap.classList.remove('go'); // reset
        void wrap.offsetWidth;       // reflow
        wrap.classList.add('go');    // dispara anim
        // navega al final del efecto
        setTimeout(()=>{ window.location.assign('/'); }, 650);
      });
    })();

    // ===== Escena de impacto: coordinar nave, satélite y objetivo
    (function(){
      const target = document.getElementById('target');
      const ship   = document.getElementById('ship');
      const sat    = document.getElementById('sat');
      const boom   = document.getElementById('boom');
      const code   = document.getElementById('code404');

      if(!target || !ship || !sat || !boom || !code) return;

      // coloca nave/sat relativos al centro del objetivo
      function positionAround(){
        const rect = target.getBoundingClientRect();
        const cx = rect.left + rect.width/2;
        const cy = rect.top  + rect.height/2;
        // posiciones iniciales (coinciden con keyframes)
        ship.style.left = (cx - rect.width*1.1)+'px';
        ship.style.top  = (cy - rect.height*1.1)+'px';
        sat.style.left  = (cx + rect.width*0.7)+'px';
        sat.style.top   = (cy - rect.height*0.7)+'px';
      }
      positionAround();
      addEventListener('resize', positionAround);

      // timeline del choque
      setTimeout(()=>{ // 1) colisión nave-satélite
        boom.style.left='50%'; boom.style.top='50%'; boom.classList.add('show');
      }, 1500);

      setTimeout(()=>{ // 2) golpea el logo -> sin señal + grietas + shake
        target.classList.add('nosignal'); target.classList.add('shake');
        document.body.classList.add('crashed');
        setTimeout(()=>target.classList.remove('shake'), 900);
      }, 2000);
    })();

    // Accesos rápidos desde CTA
    qs('#openCta')?.addEventListener('click', (e)=>{ e.preventDefault(); qs('#openComments')?.click(); });
    qs('#openMenu')?.addEventListener('click', ()=> qs('#openDrawer')?.click());
  </script>
</body>
</html>
