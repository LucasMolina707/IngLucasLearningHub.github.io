<!DOCTYPE html>
<html lang="es" data-lang="es" dir="ltr">
<head>
  <!-- ============================================================
       404 ¬∑ Ing. Lucas Learning Hub
       ============================================================ -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="dark light" />
  <meta name="application-name" content="Ing. Lucas Learning Hub" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="mobile-web-app-capable" content="yes" />
  <!-- SEO -->
  <title>404 ¬∑ P√°gina no encontrada ‚Äî Ing. Lucas Learning Hub</title>
  <meta name="description" content="La p√°gina que buscas no existe. Te guiamos al inicio o a otras secciones del Ing. Lucas Learning Hub." />
  <!-- Importante para 404 -->
  <meta name="robots" content="noindex, follow" />
  <meta name="theme-color" content="#0d47a1" />

  <!-- Iconograf√≠a -->
  <link rel="icon" href="/galeria/logo/logoinglucas.ico" sizes="any">
  <link rel="icon" type="image/svg+xml" href="/galeria/logo/logoinglucas.svg">
  <link rel="apple-touch-icon" sizes="180x180" href="/galeria/logo/logoinglucas.png">

  <style>
    :root{
      --blue-900:#0b1730; --blue-800:#0f2346; --blue-700:#153769; --blue-600:#1c4b8c; --blue-500:#2563eb; --blue-400:#60a5fa;
      --bg:#0e1116; --panel-2:#0f1722; --border:#263349; --text:#ecf3ff; --muted:#b4c2d6;
      --radius:16px; --radius-sm:12px; --shadow:0 12px 28px rgba(0,0,0,.35);
      --container:980px;
    }
    *{box-sizing:border-box} html,body{height:100%}
    body{margin:0; font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif; background:linear-gradient(180deg,var(--panel-2),#0b1220); color:var(--text)}
    a{color:var(--blue-400); text-decoration:none}
    .wrap{max-width:var(--container); margin:0 auto; padding:0 20px}

    /* i18n toggle */
    html[data-lang="es"] .i18n-en{display:none!important}
    html[data-lang="en"] .i18n-es{display:none!important}

    /* Topbar */
    .topbar{position:sticky; top:0; z-index:60; backdrop-filter:saturate(1.1) blur(8px); background:rgba(13,18,30,.75); border-bottom:1px solid var(--border)}
    .topbar .row{display:flex; align-items:center; gap:12px; padding:12px 0}
    .logo{width:36px; height:36px; border-radius:10px; display:grid; place-items:center; overflow:hidden; background:linear-gradient(180deg,#0f172a,#0b1220); border:1px solid rgba(96,165,250,.25)}
    .logo img{width:100%; height:100%; object-fit:cover; display:block}
    .brand{display:flex; flex-direction:column}
    .brand strong{font-size:16px}
    .brand span{font-size:12px; color:var(--muted)}
    .actions{margin-left:auto; display:flex; gap:10px; align-items:center}
    .icon-btn{
      --size:40px; width:var(--size); height:var(--size); display:inline-grid; place-items:center;
      border-radius:12px; border:1.5px solid var(--blue-500);
      background:linear-gradient(180deg,#0f172a,#0b1220); color:#e8f1ff; cursor:pointer;
      transition:transform .15s ease, filter .15s ease, box-shadow .15s ease;
      box-shadow:0 6px 20px rgba(0,0,0,.25);
    }
    .icon-btn:hover{transform:translateY(-1px); filter:brightness(1.05)}
    .icon-btn svg{width:22px; height:22px}
    .lang-chip{font-size:12px; font-weight:700; letter-spacing:.3px}

    /* Drawer */
    .drawer{position:fixed; z-index:70; inset:0 0 0 auto; width:320px; max-width:86vw; background:linear-gradient(180deg,#0e223a,#0a1729); border-left:2px solid var(--blue-500); box-shadow:-20px 0 40px rgba(0,0,0,.45); transform:translateX(100%); transition:.25s ease transform}
    .drawer.open{transform:translateX(0)}
    .drawer .hd{display:flex; align-items:center; justify-content:space-between; padding:14px 16px; border-bottom:1px solid var(--border)}
    .drawer .bd{padding:12px 16px; display:grid; gap:16px}
    .nav-group{border:1px solid var(--border); border-radius:12px; overflow:hidden}
    .nav{display:grid}
    .nav a{padding:12px 12px; border-top:1px solid var(--border)}
    .nav a:hover{background:rgba(37,99,235,.18)}

    /* Comments (desktop left) + mobile bottom-sheet */
    .comments-drawer{position:fixed; z-index:80; inset:0 auto 0 0; width:420px; max-width:92vw; background:linear-gradient(180deg,#0b1626,#0a1220); border-right:2px solid var(--blue-500); box-shadow:20px 0 40px rgba(0,0,0,.45); transform:translateX(-100%); transition:.25s ease transform; display:flex; flex-direction:column}
    .comments-drawer.open{transform:translateX(0)}
    .comments-drawer .hd{display:flex; align-items:center; justify-content:space-between; gap:10px; padding:12px 14px; border-bottom:1px solid var(--border)}
    .comments-drawer .bd{padding:10px 12px; overflow:auto; height:100%}
    @media (max-width:760px){
      .comments-drawer{inset:auto 0 0 0; width:100vw; height:60vh; border-right:none; border-top:2px solid var(--blue-500); box-shadow:0 -20px 40px rgba(0,0,0,.45); transform:translateY(100%)}
      .comments-drawer.open{transform:translateY(0)}
      .comments-drawer .bd{height:calc(60vh - 50px)}
    }

    /* 404 hero */
    .e404{display:grid; gap:16px; padding:26px 0 36px}
    .card{background:linear-gradient(180deg,rgba(25,31,45,.96),rgba(18,23,33,.96)); border:1px solid var(--border); border-radius:var(--radius); box-shadow:var(--shadow); padding:18px}
    .hero{display:grid; gap:10px; text-align:center; padding:20px; border:1px dashed var(--border); border-radius:var(--radius)}
    .code{font-size:64px; line-height:1; letter-spacing:1px; margin:6px 0 0}
    .lead{color:var(--muted); margin:0}
    .cta{display:flex; gap:10px; flex-wrap:wrap; justify-content:center; margin-top:10px}
    .btn{display:inline-flex; align-items:center; gap:8px; padding:10px 14px; border-radius:12px; border:1px solid var(--border); background:rgba(18,23,31,.8); color:var(--text); cursor:pointer; text-decoration:none}
    .btn:hover{transform:translateY(-1px)}
    .btn.primary{background:linear-gradient(180deg,var(--blue-600),var(--blue-500)); border-color:transparent}
    .grid{display:grid; gap:16px}
    @media(min-width:860px){.grid{grid-template-columns:1.1fr .9fr}}
    .small{font-size:13px; color:var(--muted)}
    .list{display:grid}
    .list a{padding:10px 12px; border:1px solid var(--border); border-radius:10px; margin-bottom:8px; background:rgba(18,23,31,.5)}
    .search{display:flex; gap:8px; flex-wrap:wrap; justify-content:center}
    .search input{flex:1 1 240px; min-width:220px; padding:10px 12px; border-radius:12px; border:1px solid var(--border); background:#0f172a; color:#eaf2ff}
    .countdown{font-variant-numeric:tabular-nums; font-weight:700}
  </style>
</head>

<body>
  <!-- Topbar -->
  <div class="topbar">
    <div class="wrap row">
      <a class="logo" href="/" aria-label="Inicio ¬∑ Ing. Lucas Learning Hub">
        <picture>
          <source srcset="/galeria/logo/logoinglucas.svg" type="image/svg+xml">
          <img src="/galeria/logo/logoinglucas.png" alt="Logo Ing. Lucas" width="36" height="36" loading="eager" fetchpriority="high">
        </picture>
      </a>
      <div class="brand">
        <strong>Ing. Lucas Learning Hub</strong>
        <span class="i18n-es">Error 404</span>
        <span class="i18n-en">Error 404</span>
      </div>

      <div class="actions">
        <!-- Comentarios -->
        <button class="icon-btn" id="openComments" title="Abrir comentarios" aria-label="Abrir comentarios" aria-expanded="false" aria-controls="commentsDrawer">
          <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M20 2H4a2 2 0 0 0-2 2v16l4-4h14a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2z"/></svg>
        </button>
        <!-- Men√∫ -->
        <button class="icon-btn" id="openDrawer" title="Abrir men√∫" aria-label="Abrir men√∫" aria-expanded="false" aria-controls="drawer">
          <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M3 6h18v2H3V6zm0 5h18v2H3v-2zm0 5h18v2H3v-2z"/></svg>
        </button>
        <!-- Idioma -->
        <button class="icon-btn" id="langToggle" title="Cambiar idioma" aria-label="Cambiar idioma" aria-pressed="false">
          <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20zm7.73 6h-3.46a15.9 15.9 0 0 0-1.6-3.63A8.03 8.03 0 0 1 19.73 8zM12 4c.88 0 2.39 1.88 3.23 4H8.77C9.61 5.88 11.12 4 12 4zM4.27 8A8.03 8.03 0 0 1 9.33 4.37 15.9 15.9 0 0 0 7.73 8H4.27zM4 10h3.16c-.08.66-.13 1.32-.13 2s.05 1.34.13 2H4a8 8 0 0 1 0-4zm.27 6h3.46c.4 1.28.95 2.49 1.6 3.63A8.03 8.03 0 0 1 4.27 16zM12 20c-.88 0-2.39-1.88-3.23-4h6.46C14.39 18.12 12.88 20 12 20zm2.67-.37c.65-1.14 1.2-2.35 1.6-3.63h3.46a8.03 8.03 0 0 1-5.06 3.63zM20 14h-3.16c.08-.66.13-1.32.13-2s-.05-1.34-.13-2H20a8 8 0 0 1 0 4z"/></svg>
          <span class="lang-chip" id="langChip" aria-hidden="true">ES</span>
        </button>
      </div>
    </div>
  </div>

  <!-- Drawer -->
  <aside class="drawer" id="drawer" aria-label="Men√∫ de navegaci√≥n" aria-hidden="true">
    <div class="hd">
      <strong class="i18n-es">Navegaci√≥n</strong>
      <strong class="i18n-en">Navigation</strong>
      <button class="btn" id="closeDrawer" aria-label="Cerrar">Cerrar ‚úï</button>
    </div>
    <div class="bd">
      <div class="nav-group">
        <h4 class="i18n-es">P√°ginas</h4>
        <h4 class="i18n-en">Pages</h4>
        <nav class="nav" id="nav-pages"></nav>
      </div>
      <div class="nav-group">
        <h4 class="i18n-es">Ventanas / Proyectos</h4>
        <h4 class="i18n-en">Windows / Projects</h4>
        <nav class="nav" id="nav-projects"></nav>
      </div>
    </div>
  </aside>

  <!-- Comments Drawer -->
  <aside class="comments-drawer" id="commentsDrawer" aria-label="Comentarios" aria-hidden="true">
    <div class="hd">
      <strong class="i18n-es">Comentarios</strong>
      <strong class="i18n-en">Comments</strong>
      <button class="btn" id="closeComments" aria-label="Cerrar comentarios">Cerrar ‚úï</button>
    </div>
    <div class="bd">
      <div id="commentsMount" aria-live="polite"></div>
    </div>
  </aside>

  <!-- 404 Content -->
  <div class="wrap e404">
    <section class="card hero" role="alert" aria-live="polite">
      <div class="i18n-es">
        <h1 class="code">404</h1>
        <p class="lead">No encontramos esta p√°gina. Te llevaremos al <strong>inicio</strong> en <span id="cd" class="countdown">8</span> s.</p>
      </div>
      <div class="i18n-en">
        <h1 class="code">404</h1>
        <p class="lead">We can‚Äôt find this page. Redirecting to the <strong>home</strong> in <span id="cdEn" class="countdown">8</span> s.</p>
      </div>
      <div class="cta">
        <a class="btn primary" href="/" id="goHome">üè† <span class="i18n-es">Ir al inicio</span><span class="i18n-en">Go home</span></a>
        <button class="btn" id="stopRedirect">‚è∏Ô∏è <span class="i18n-es">Detener redirecci√≥n</span><span class="i18n-en">Stop redirect</span></button>
        <button class="btn" id="goBack">‚Ü©Ô∏è <span class="i18n-es">Volver atr√°s</span><span class="i18n-en">Go back</span></button>
        <a class="btn" id="reportLink" target="_blank" rel="noopener">üêû <span class="i18n-es">Reportar enlace roto</span><span class="i18n-en">Report broken link</span></a>
        <button class="btn" id="openComments2">üí¨ <span class="i18n-es">Abrir comentarios</span><span class="i18n-en">Open comments</span></button>
      </div>
      <form class="search" id="searchForm" role="search" aria-label="Buscar">
        <input id="q" name="q" type="search" placeholder="Buscar en el sitio‚Ä¶" aria-label="Buscar en el sitio">
        <button class="btn" type="submit">üîé <span class="i18n-es">Buscar</span><span class="i18n-en">Search</span></button>
      </form>
      <p class="small i18n-es">Sugerencias abajo o usa el men√∫ (‚ò∞) para navegar.</p>
      <p class="small i18n-en">See suggestions below or use the menu (‚ò∞) to navigate.</p>
    </section>

    <section class="grid">
      <div class="card">
        <h2 class="i18n-es" style="margin:0 0 8px">Sugerencias r√°pidas</h2>
        <h2 class="i18n-en" style="margin:0 0 8px">Quick suggestions</h2>
        <nav class="list" id="suggestPages"></nav>
      </div>
      <div class="card">
        <h2 class="i18n-es" style="margin:0 0 8px">Proyectos recientes</h2>
        <h2 class="i18n-en" style="margin:0 0 8px">Recent projects</h2>
        <nav class="list" id="suggestProjects"></nav>
      </div>
    </section>
  </div>

  <!-- Footer (simple) -->
  <footer style="border-top:1px solid var(--border); color:var(--muted); padding:22px 0; background:linear-gradient(180deg,#0f1624,#0c121e)">
    <div class="wrap" style="display:flex; justify-content:space-between; gap:12px; flex-wrap:wrap">
      <div>¬© <span id="y"></span> <strong>IngLucas</strong> ¬∑ Colombia</div>
      <div><a href="politicas-privacidad.html" style="color:inherit">Pol√≠ticas de Privacidad</a></div>
    </div>
  </footer>

  <script>
    // ===== Config
    const HOME_URL = '/';
    document.getElementById('y').textContent = new Date().getFullYear();

    // ===== Helpers
    const qs = (s)=>document.querySelector(s);
    const $drawer = qs('#drawer');
    const $comments = qs('#commentsDrawer');
    const $btnDrawer = qs('#openDrawer');
    const $btnComments = qs('#openComments');
    const isDesktop = matchMedia('(hover:hover) and (pointer:fine)').matches;
    const isMobile  = matchMedia('(hover:none) and (pointer:coarse)').matches;
    function setOpen(el, btn, open){
      el.classList.toggle('open', open);
      el.setAttribute('aria-hidden', open ? 'false' : 'true');
      btn?.setAttribute('aria-expanded', open ? 'true' : 'false');
    }

    // ===== Drawer
    const $closeDrawer = qs('#closeDrawer'); let drawerTimer=null;
    function openDrawer(){ setOpen($drawer,$btnDrawer,true); if(isMobile){ clearTimeout(drawerTimer); drawerTimer=setTimeout(()=>closeDrawer(),5000);} }
    function closeDrawer(){ setOpen($drawer,$btnDrawer,false); clearTimeout(drawerTimer); }
    $btnDrawer?.addEventListener('click', e=>{ e.stopPropagation(); ($drawer.classList.contains('open')?closeDrawer():openDrawer()); });
    $closeDrawer?.addEventListener('click', closeDrawer);
    if(isDesktop){ $btnDrawer?.addEventListener('mouseenter', openDrawer); $drawer?.addEventListener('mouseleave', closeDrawer); }
    document.addEventListener('click', e=>{ if($drawer.classList.contains('open') && !e.composedPath().includes($drawer) && !e.composedPath().includes($btnDrawer)) closeDrawer(); }, {passive:true});

    // ===== Comments (Utterances on demand)
    const $closeComments = qs('#closeComments');
    const $commentsMount = qs('#commentsMount');
    let commentsLoaded=false, inactivityTimer=null, lastActivity=Date.now();
    function injectUtterances(){
      if(commentsLoaded) return;
      const s=document.createElement('script');
      s.src='https://utteranc.es/client.js';
      s.setAttribute('repo','LucasMolina707/IngLucasLearningHub.github.io');
      s.setAttribute('issue-term','pathname');
      s.setAttribute('theme','icy-dark');
      s.setAttribute('crossorigin','anonymous');
      s.async=true;
      $commentsMount.appendChild(s);
      commentsLoaded=true;
    }
    function openComments(){ setOpen($comments,$btnComments,true); injectUtterances(); if(isDesktop) startInactivityWatcher(); }
    function closeComments(){ setOpen($comments,$btnComments,false); stopInactivityWatcher(); }
    $btnComments?.addEventListener('click', e=>{ e.stopPropagation(); ($comments.classList.contains('open')?closeComments():openComments()); });
    $closeComments?.addEventListener('click', closeComments);
    document.getElementById('openComments2')?.addEventListener('click', openComments);
    document.addEventListener('click', (e)=>{ if($comments.classList.contains('open') && !e.composedPath().includes($comments) && !e.composedPath().includes($btnComments)) closeComments(); }, {passive:true});
    function startInactivityWatcher(){
      lastActivity=Date.now();
      if(inactivityTimer) return;
      inactivityTimer=setInterval(()=>{
        const idleMs=Date.now()-lastActivity, hovering=$comments.matches(':hover');
        if($comments.classList.contains('open') && idleMs>5000 && !hovering) closeComments();
        if(!$comments.classList.contains('open')) stopInactivityWatcher();
      },500);
    }
    function stopInactivityWatcher(){ clearInterval(inactivityTimer); inactivityTimer=null; }
    ['mousemove','keydown','wheel','touchstart','touchmove'].forEach(evt=>document.addEventListener(evt,()=>{ lastActivity=Date.now(); },{passive:true}));

    // ===== I18N toggle
    (function(){
      const LANG_KEY='hubLang'; const $btn=qs('#langToggle'); const $chip=qs('#langChip');
      function setAriaForLang(L){
        const openComments=qs('#openComments'); if(openComments){ const t=L==='en'?'Open comments':'Abrir comentarios'; openComments.title=t; openComments.setAttribute('aria-label',t); }
        const openDrawer=qs('#openDrawer'); if(openDrawer){ const t=L==='en'?'Open menu':'Abrir men√∫'; openDrawer.title=t; openDrawer.setAttribute('aria-label',t); }
        const closeDrawer=qs('#closeDrawer'); if(closeDrawer){ closeDrawer.setAttribute('aria-label', L==='en'?'Close':'Cerrar'); closeDrawer.textContent = L==='en'?'Close ‚úï':'Cerrar ‚úï'; }
        const closeComments=qs('#closeComments'); if(closeComments){ closeComments.setAttribute('aria-label', L==='en'?'Close comments':'Cerrar comentarios'); closeComments.textContent = L==='en'?'Close ‚úï':'Cerrar ‚úï'; }
      }
      function applyLang(lang){
        const L=(lang==='en')?'en':'es';
        document.documentElement.setAttribute('data-lang',L);
        document.documentElement.setAttribute('lang',L);
        localStorage.setItem(LANG_KEY,L);
        $chip.textContent=L.toUpperCase();
        $btn.setAttribute('aria-label', L==='en'?'Switch language to Spanish':'Cambiar idioma a ingl√©s');
        $btn.setAttribute('title', L==='en'?'Switch to Spanish':'Cambiar a English');
        $btn.setAttribute('aria-pressed', L==='en');
        setAriaForLang(L);
      }
      const saved=localStorage.getItem(LANG_KEY)||'es'; applyLang(saved);
      $btn?.addEventListener('click',()=>{ const cur=document.documentElement.getAttribute('data-lang')||'es'; applyLang(cur==='es'?'en':'es'); });
    })();

    // ===== 404 Redirect logic
    const $cd = qs('#cd'), $cdEn = qs('#cdEn');
    const $stop = qs('#stopRedirect'), $back = qs('#goBack'), $home = qs('#goHome');
    let secs = 8, timer = null, cancelled = false;
    function tick(){
      if (cancelled) return;
      ($cd||{}).textContent = String(secs);
      ($cdEn||{}).textContent = String(secs);
      if(secs<=0){ window.location.assign(HOME_URL); return; }
      secs--; timer = setTimeout(tick, 1000);
    }
    timer = setTimeout(tick, 1000);
    $stop?.addEventListener('click', ()=>{ cancelled = true; clearTimeout(timer); });
    $back?.addEventListener('click', ()=>{ if(history.length>1) history.back(); else window.location.assign(HOME_URL); });
    // Report broken link prefilled
    (function(){
      const path = location.pathname + location.search;
      const title = encodeURIComponent('404: Broken link ‚Üí ' + path);
      const body = encodeURIComponent(`P√°gina que fall√≥: ${location.href}\n\nNavegador: ${navigator.userAgent}\n\nComentario: `);
      const url = `https://github.com/LucasMolina707/IngLucasLearningHub.github.io/issues/new?title=${title}&body=${body}`;
      const a = document.getElementById('reportLink'); if(a) a.href = url;
    })();

    // Search ‚Üí send to home with ?q=
    qs('#searchForm')?.addEventListener('submit', (e)=>{
      e.preventDefault();
      const q = (qs('#q')?.value||'').trim();
      if(q) window.location.assign(`${HOME_URL}?q=${encodeURIComponent(q)}`);
      else window.location.assign(HOME_URL);
    });

    // ===== Auto menu + suggestions (nav.json with GitHub fallback)
    (async function initAutoMenu(){
      const elPages = document.getElementById('nav-pages');
      const elProjects = document.getElementById('nav-projects');
      const sugPages = document.getElementById('suggestPages');
      const sugProjects = document.getElementById('suggestProjects');
      const CACHE_KEY = 'navjson-cache'; const MAX_AGE = 24*60*60*1000;

      async function githubFallback(){
        try{
          const owner='LucasMolina707', repo='IngLucasLearningHub.github.io', branch='main';
          const api=`https://api.github.com/repos/${owner}/${repo}/git/trees/${branch}?recursive=1`;
          const r = await fetch(api); const j = await r.json();
          const files = (j.tree||[]).filter(x=>x.type==='blob' && x.path.endsWith('.html'));
          const skip = p => p.startsWith('templates/')||p.startsWith('multimedia/')||p.startsWith('galeria/')||p.startsWith('assets/')||p.includes('/draft');
          const pretty = s => s.replace(/\.html$/,'').split('/').pop().replace(/[-_]+/g,' ').replace(/\b\w/g,c=>c.toUpperCase());
          const pages=[], projects=[];
          for(const f of files){
            if(skip(f.path)) continue;
            const item = { href:'/'+f.path, label:pretty(f.path) };
            if (f.path==='index.html' || f.path==='contacto.html' || f.path==='politicas-privacidad.html' || !f.path.includes('/')) pages.push(item);
            else projects.push(item);
          }
          pages.sort((a,b)=>a.label.localeCompare(b.label,'es'));
          projects.sort((a,b)=>a.label.localeCompare(b.label,'es'));
          pages.sort((a,b)=> a.href.endsWith('/index.html')||a.href==='/index.html' ? -1 : b.href.endsWith('/index.html')||b.href==='/index.html' ? 1 : 0);
          return { pages, projects };
        }catch(e){ console.warn('[menu] fallback fail', e); return {pages:[], projects:[]}; }
      }
      async function fetchNav(){
        try{
          const cached = localStorage.getItem(CACHE_KEY);
          if(cached){ const obj=JSON.parse(cached); if(Date.now()-obj.ts<MAX_AGE && obj.data) return obj.data; }
          const res = await fetch('/nav.json', {cache:'no-cache'});
          if(!res.ok) throw new Error('nav.json unavailable');
          const data = await res.json();
          localStorage.setItem(CACHE_KEY, JSON.stringify({ts:Date.now(), data}));
          return data;
        }catch(e){
          const data = await githubFallback();
          localStorage.setItem(CACHE_KEY, JSON.stringify({ts:Date.now(), data}));
          return data;
        }
      }
      function renderList(container, list, limit=null){
        if(!container) return;
        const items = (limit? list.slice(0,limit) : list)
          .map(i=>`<a href="${i.href}">${i.label}</a>`).join('');
        container.innerHTML = items || `<span class="small i18n-es">Sin datos</span><span class="small i18n-en">No data</span>`;
      }
      try{
        const nav = await fetchNav();
        renderList(elPages, nav.pages||[]);
        renderList(elProjects, nav.projects||[]);
        renderList(sugPages, (nav.pages||[]).filter(p=>/index\.html$|contacto\.html$|politicas-privacidad\.html$/.test(p.href) || p.href.endsWith('/index.html')), 6);
        renderList(sugProjects, nav.projects||[], 6);
      }catch(e){ console.error('[menu] error:', e); }
    })();

    // ===== Accessibility
    document.addEventListener('keydown', (e)=>{ if(e.key==='Escape'){ closeDrawer(); closeComments(); } });

    // ===== Language chip init text
    (function(){ const L = document.documentElement.getAttribute('data-lang')||'es'; const chip=qs('#langChip'); if(chip) chip.textContent=L.toUpperCase(); })();
  </script>
</body>
</html>
