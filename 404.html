<!DOCTYPE html>
<html lang="es" data-lang="es" dir="ltr">
<head>
  <!-- ============================================================
       404 · Gato + Estambre (30s) · Ing. Lucas Learning Hub
       ============================================================ -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="dark light" />
  <meta name="application-name" content="Ing. Lucas Learning Hub" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="mobile-web-app-capable" content="yes" />
  <title>404 · Página no encontrada — Ing. Lucas Learning Hub</title>
  <meta name="description" content="Un gatito curioso está buscando esta página… Te llevaremos al inicio cuando la bola de estambre termine de rodar." />
  <meta name="robots" content="noindex, follow" />
  <meta name="theme-color" content="#0d47a1" />

  <!-- Iconos -->
  <link rel="icon" href="/galeria/logo/logoinglucas.ico" sizes="any">
  <link rel="icon" type="image/svg+xml" href="/galeria/logo/logoinglucas.svg">
  <link rel="apple-touch-icon" sizes="180x180" href="/galeria/logo/logoinglucas.png">

  <style>
    /* ========== Diseño base y paleta (estilo sitio) ========== */
    :root{
      --blue-900:#0b1730; --blue-800:#0f2346; --blue-700:#153769; --blue-600:#1c4b8c; --blue-500:#2563eb; --blue-400:#60a5fa;
      --purple-600:#7c3aed; --cyan-400:#22d3ee;
      --bg:#0e1116; --panel-2:#0f1722; --border:#263349; --text:#ecf3ff; --muted:#b4c2d6;
      --radius:16px; --shadow:0 12px 28px rgba(0,0,0,.35);
      --container:1100px;
      --accent-ring: 0 0 0 3px rgba(34,211,238,.25);
      --logo-url: url("/galeria/logo/logoinglucas.svg"); /* papel tapiz */
      --pct: 0%; /* progreso estambre */
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif; color:var(--text);
      background:linear-gradient(180deg,var(--panel-2),#0b1220); overflow-x:hidden; position:relative;
    }
    .wrap{max-width:var(--container); margin:0 auto; padding:0 20px}
    a{color:var(--blue-400); text-decoration:none}

    /* Papel tapiz (logo en patrón) */
    body::before{
      content:""; position:fixed; inset:0; z-index:0; pointer-events:none;
      background-image: var(--logo-url);
      background-repeat: repeat;
      background-size: 92px 92px;
      opacity:.055; filter:grayscale(1) contrast(1.05);
    }

    /* I18N */
    html[data-lang="es"] .i18n-en{display:none!important}
    html[data-lang="en"] .i18n-es{display:none!important}

    /* Topbar (comentarios / menú / idioma) */
    .topbar{ position:sticky; top:0; z-index:60; backdrop-filter:saturate(1.1) blur(8px); background:rgba(13,18,30,.75); border-bottom:1px solid var(--border)}
    .topbar .row{display:flex; align-items:center; gap:12px; padding:12px 0}
    .logo{ width:36px; height:36px; border-radius:10px; display:grid; place-items:center; overflow:hidden; background:linear-gradient(180deg,#0f172a,#0b1220); border:1px solid rgba(96,165,250,.25)}
    .logo img{width:100%; height:100%; object-fit:cover; display:block}
    .brand{display:flex; flex-direction:column}
    .brand strong{font-size:16px}
    .brand span{font-size:12px; color:var(--muted)}
    .actions{ margin-left:auto; display:flex; gap:10px; align-items:center }
    .icon-btn{
      --size:40px; width:var(--size); height:var(--size); display:inline-grid; place-items:center;
      border-radius:12px; border:1.5px solid var(--blue-500);
      background:linear-gradient(180deg,#0f172a,#0b1220); color:#e8f1ff; cursor:pointer; transition:transform .15s ease, filter .15s ease, box-shadow .15s ease;
      box-shadow:0 6px 20px rgba(0,0,0,.25);
    }
    .icon-btn:hover{ transform:translateY(-1px); filter:brightness(1.05)}
    .icon-btn:focus-visible{ outline:none; box-shadow:var(--accent-ring) }
    .icon-btn svg{ width:22px; height:22px; display:block }
    .lang-chip{font-size:12px; font-weight:700; letter-spacing:.3px}

    /* Drawers (menú y comentarios) */
    .drawer{ position:fixed; z-index:70; inset:0 0 0 auto; width:320px; max-width:86vw; background:linear-gradient(180deg,#0e223a,#0a1729); border-left:2px solid var(--blue-500); box-shadow:-20px 0 40px rgba(0,0,0,.45); transform:translateX(100%); transition:.25s ease transform }
    .drawer.open{transform:translateX(0)}
    .drawer .hd{display:flex; align-items:center; justify-content:space-between; padding:14px 16px; border-bottom:1px solid var(--border)}
    .drawer .bd{padding:12px 16px; display:grid; gap:16px}
    .nav-group{border:1px solid var(--border); border-radius:12px; overflow:hidden}
    .nav-group h4{margin:0; padding:10px 12px; font-size:13px; color:var(--muted); background:#111826; border-bottom:1px solid var(--border)}
    .nav{display:grid}
    .nav a{padding:12px 12px; border-top:1px solid var(--border)}
    .nav a:hover{background:rgba(37,99,235,.18)}

    .comments-drawer{ position:fixed; z-index:80; inset:0 auto 0 0; width:420px; max-width:92vw; background:linear-gradient(180deg,#0b1626,#0a1220); border-right:2px solid var(--blue-500); box-shadow:20px 0 40px rgba(0,0,0,.45); transform:translateX(-100%); transition:.25s ease transform; display:flex; flex-direction:column; }
    .comments-drawer.open{ transform:translateX(0) }
    .comments-drawer .hd{display:flex; align-items:center; justify-content:space-between; gap:10px; padding:12px 14px; border-bottom:1px solid var(--border)}
    .comments-drawer .bd{padding:10px 12px; overflow:auto; height:100%}
    @media (max-width:760px){
      .comments-drawer{inset:auto 0 0 0; width:100vw; height:60vh; border-right:none; border-top:2px solid var(--blue-500); box-shadow:0 -20px 40px rgba(0,0,0,.45); transform:translateY(100%)}
      .comments-drawer.open{transform:translateY(0)}
      .comments-drawer .bd{height:calc(60vh - 50px)}
    }

    /* ======== Contenido principal ======== */
    .scene{ position:relative; z-index:1; padding:26px 0 36px }
    .card{ background:linear-gradient(180deg,rgba(25,31,45,.96),rgba(18,23,33,.96)); border:1px solid var(--border); border-radius:var(--radius); box-shadow:var(--shadow); padding:18px }
    .hero{ display:grid; gap:16px; border:1px dashed var(--border); border-radius:var(--radius); padding:22px; text-align:center }

    .title404{ font-size: clamp(42px, 8vw, 110px); line-height:1; margin:0; letter-spacing:2px; }
    .lead{ color:var(--muted); margin:0 }

    .cta-row{display:flex; gap:10px; justify-content:center; flex-wrap:wrap; margin-top:6px}
    .btn-inline{ padding:10px 14px; border-radius:12px; border:1px solid var(--border); background:rgba(18,23,31,.8); color:var(--text); cursor:pointer; text-decoration:none; display:inline-flex; align-items:center; gap:8px }
    .btn-inline:hover{ transform:translateY(-1px) }
    .btn-inline.primary{ background:linear-gradient(180deg,var(--blue-600),var(--blue-500)); border-color:transparent }

    /* ======== Gato (CSS puro) ======== */
    .cat-wrap{ display:grid; place-items:center; margin:6px 0 2px }
    .cat{
      position: relative;
      height: min(170px, 42vw); /* responsive */
      width: calc(min(170px, 42vw) * 1.13);
      filter: drop-shadow(0 10px 24px rgba(0,0,0,.35));
    }
    .ear{
      position: absolute; top: -30%;
      height: 60%; width: 25%; background: #fff;
    }
    .ear::before, .ear::after{
      content:""; position:absolute; bottom:24%; height:10%; width:5%;
      border-radius:50%; background:#161616;
    }
    .ear--left{
      left:-7%; border-radius:70% 30% 0 0 / 100% 100% 0 0; transform: rotate(-15deg);
    }
    .ear--left::before, .ear--left::after{ right:10% }
    .ear--left::after{ transform-origin:50% 100%; transform: rotate(-45deg) }

    .ear--right{
      right:-7%; border-radius:30% 70% 0 0 / 100% 100% 0 0; transform: rotate(15deg);
    }
    .ear--right::before, .ear--right::after{ left:10% }
    .ear--right::after{ transform-origin:50% 100%; transform: rotate(45deg) }

    .face{
      position:absolute; inset:0; background:#161616; border-radius:50%;
    }

    .eye{
      position:absolute; top:35%; height:30%; width:31%; background:#fff;
      border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
    }
    .eye::after{
      content:""; position:absolute; inset:0 0 auto 0; height:0; width:100%;
      border-radius:0 0 50% 50% / 0 0 40% 40%; background:#161616;
      animation: blink 4s infinite ease-in;
    }
    @keyframes blink{
      0%, 90%{ height:0 } 92.5%{ height:100% } 95%{ height:0 } 97.5%{ height:100% } 100%{ height:0 }
    }
    .eye::before{ /* brillo inferior */
      content:""; position:absolute; top:60%; height:10%; width:15%; background:#fff; border-radius:50%;
    }
    .eye--left{ left:0 }
    .eye--left::before{ right:-5% }
    .eye--right{ right:0 }
    .eye--right::before{ left:-5% }

    .eye-pupil{
      --tx: 0%; --ty: 0%;
      position:absolute; top:25%; height:50%; width:20%; background:#161616; border-radius:50%;
      transform: translate(var(--tx), var(--ty));
    }
    .eye-pupil::after{ /* brillo pupila */
      content:""; position:absolute; top:30%; right:-5%; height:20%; width:35%; border-radius:50%; background:#fff;
    }
    .eye--left .eye-pupil{ right:30% }
    .eye--right .eye-pupil{ left:30% }

    .muzzle{
      position:absolute; top:60%; left:50%; height:6%; width:10%; background:#fff;
      transform:translateX(-50%); border-radius:50% 50% 50% 50% / 30% 30% 70% 70%;
    }

    /* ======== Estambre (progreso 30s) ======== */
    .yarn-wrap{ margin:10px 0 0; }
    .thread{
      position:relative; height:54px;
      display:grid; align-items:end;
    }
    .thread .line{
      height:10px; border-radius:999px; background:rgba(96,165,250,.12);
      border:1px solid rgba(96,165,250,.25); overflow:hidden;
    }
    .thread .bar{
      height:100%; width:var(--pct);
      background:linear-gradient(90deg, rgba(96,165,250,.7), rgba(124,58,237,.7));
      transition:width .1s linear;
    }
    .yarn{
      position:absolute; bottom:22px; left:var(--pct); transform:translateX(-50%) rotate(var(--rot,0deg));
      width:42px; height:42px; border-radius:50%;
      background:
        radial-gradient(circle at 40% 35%, #fff2 0 12%, transparent 13%),
        repeating-radial-gradient(circle at 50% 50%, rgba(255,255,255,.22) 0 2px, rgba(255,255,255,.06) 2px 4px),
        radial-gradient(circle at 50% 50%, rgba(96,165,250,.75), rgba(124,58,237,.7));
      box-shadow:0 10px 16px rgba(0,0,0,.35);
    }
    .yarn::after{ /* hebra suelta */
      content:""; position:absolute; right:-14%; top:55%; width:18px; height:18px; border:2px solid rgba(255,255,255,.4);
      border-left-color:transparent; border-top-color:transparent; border-radius:50%;
      transform:rotate(25deg);
    }
    .ycount{ margin-top:6px; font-size:14px; color:var(--muted) }

    /* Accesible / reduce motion */
    @media (prefers-reduced-motion: reduce){
      .eye::after{ animation:none !important }
    }
  </style>
</head>
<body>
  <!-- Topbar -->
  <div class="topbar">
    <div class="wrap row">
      <a class="logo" href="/" aria-label="Inicio · Ing. Lucas Learning Hub">
        <picture>
          <source srcset="/galeria/logo/logoinglucas.svg" type="image/svg+xml">
          <img src="/galeria/logo/logoinglucas.png" alt="Logo Ing. Lucas" width="36" height="36" loading="eager" fetchpriority="high">
        </picture>
      </a>
      <div class="brand">
        <strong>Ing. Lucas Learning Hub</strong>
        <span class="i18n-es">Error 404</span>
        <span class="i18n-en">Error 404</span>
      </div>
      <div class="actions">
        <!-- Comentarios -->
        <button class="icon-btn" id="openComments" title="Abrir comentarios" aria-label="Abrir comentarios" aria-expanded="false" aria-controls="commentsDrawer">
          <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M20 2H4a2 2 0 0 0-2 2v16l4-4h14a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2z"/></svg>
        </button>
        <!-- Menú -->
        <button class="icon-btn" id="openDrawer" title="Abrir menú" aria-label="Abrir menú" aria-expanded="false" aria-controls="drawer">
          <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M3 6h18v2H3V6zm0 5h18v2H3v-2zm0 5h18v2H3v-2z"/></svg>
        </button>
        <!-- Idioma -->
        <button class="icon-btn" id="langToggle" title="Cambiar idioma" aria-label="Cambiar idioma" aria-pressed="false">
          <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20zm7.73 6h-3.46a15.9 15.9 0 0 0-1.6-3.63A8.03 8.03 0 0 1 19.73 8zM12 4c.88 0 2.39 1.88 3.23 4H8.77C9.61 5.88 11.12 4 12 4zM4.27 8A8.03 8.03 0 0 1 9.33 4.37 15.9 15.9 0 0 0 7.73 8H4.27zM4 10h3.16c-.08.66-.13 1.32-.13 2s-.05 1.34-.13 2H4a8 8 0 0 1 0-4zm.27 6h3.46c.4 1.28.95 2.49 1.6 3.63A8.03 8.03 0 0 1 4.27 16zM12 20c-.88 0-2.39-1.88-3.23-4h6.46C14.39 18.12 12.88 20 12 20zm2.67-.37c.65-1.14 1.2-2.35 1.6-3.63h3.46a8.03 8.03 0 0 1-5.06 3.63zM20 14h-3.16c.08-.66.13-1.32.13-2s-.05-1.34-.13-2H20a8 8 0 0 1 0 4z"/></svg>
          <span class="lang-chip" id="langChip" aria-hidden="true">ES</span>
        </button>
      </div>
    </div>
  </div>

  <!-- Drawer Menú -->
  <aside class="drawer" id="drawer" aria-label="Menú de navegación" aria-hidden="true">
    <div class="hd">
      <strong class="i18n-es">Navegación</strong>
      <strong class="i18n-en">Navigation</strong>
      <button class="btn-inline" id="closeDrawer" aria-label="Cerrar">Cerrar ✕</button>
    </div>
    <div class="bd">
      <div class="nav-group">
        <h4 class="i18n-es">Páginas</h4>
        <h4 class="i18n-en">Pages</h4>
        <nav class="nav" id="nav-pages"></nav>
      </div>
      <div class="nav-group">
        <h4 class="i18n-es">Ventanas / Proyectos</h4>
        <h4 class="i18n-en">Windows / Projects</h4>
        <nav class="nav" id="nav-projects"></nav>
      </div>
    </div>
  </aside>

  <!-- Drawer Comentarios -->
  <aside class="comments-drawer" id="commentsDrawer" aria-label="Comentarios" aria-hidden="true">
    <div class="hd">
      <strong class="i18n-es">Comentarios</strong>
      <strong class="i18n-en">Comments</strong>
      <button class="btn-inline" id="closeComments" aria-label="Cerrar comentarios">Cerrar ✕</button>
    </div>
    <div class="bd">
      <div id="commentsMount" aria-live="polite"></div>
    </div>
  </aside>

  <!-- Contenido -->
  <main class="scene wrap" role="main" aria-label="Contenido principal 404">
    <section class="card hero">
      <h1 class="title404">404</h1>
      <p class="lead i18n-es">Un gatito curioso no encontró esta página…</p>
      <p class="lead i18n-en">A curious kitty couldn’t find this page…</p>

      <!-- Gato -->
      <div class="cat-wrap" aria-hidden="false">
        <div class="cat" id="cat">
          <div class="ear ear--left"></div>
          <div class="ear ear--right"></div>
          <div class="face">
            <div class="eye eye--left"><div class="eye-pupil" id="pL"></div></div>
            <div class="eye eye--right"><div class="eye-pupil" id="pR"></div></div>
            <div class="muzzle"></div>
          </div>
        </div>
      </div>

      <!-- Estambre (30s) -->
      <div class="yarn-wrap">
        <div class="thread" id="thread"
             role="progressbar" aria-label="Cuenta regresiva hacia inicio (30 segundos)"
             aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
          <div class="yarn" id="yarn" role="img" aria-label="Bola de estambre rodando"></div>
          <div class="line"><div class="bar" id="bar"></div></div>
        </div>
        <div class="ycount">
          <span class="i18n-es">Te llevaremos al <strong>inicio</strong> en</span>
          <span class="i18n-en">You’ll go <strong>home</strong> in</span>
          <b><span id="count">30</span>s</b> ·
          <a href="/" class="i18n-es">Saltar ahora</a>
          <a href="/" class="i18n-en">Skip now</a>
        </div>
      </div>

      <div class="cta-row">
        <a class="btn-inline primary" href="/" id="goHome">
          <span class="i18n-es">Volver al inicio</span>
          <span class="i18n-en">Go to home</span>
        </a>
        <a class="btn-inline" href="#" id="openCta">
          💬 <span class="i18n-es">Abrir comentarios</span>
          <span class="i18n-en">Open comments</span>
        </a>
        <button class="btn-inline" id="openMenu">
          ☰ <span class="i18n-es">Abrir menú</span>
          <span class="i18n-en">Open menu</span>
        </button>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer style="border-top:1px solid var(--border); color:var(--muted); padding:22px 0; background:linear-gradient(180deg,#0f1624,#0c121e)">
    <div class="wrap" style="display:flex; justify-content:space-between; gap:12px; flex-wrap:wrap">
      <div>© <span id="y"></span> <strong>IngLucas</strong> · Colombia</div>
      <div><a href="/politicas-privacidad.html" style="color:inherit">Políticas de Privacidad</a></div>
    </div>
  </footer>

  <script>
    // ===== Config
    const HOME_URL = '/';
    const TOTAL_MS = 30000; // 30 s

    // Año footer
    document.getElementById('y').textContent = new Date().getFullYear();

    // Helpers
    const qs = s => document.querySelector(s);
    const $drawer = qs('#drawer');
    const $comments = qs('#commentsDrawer');
    const $btnDrawer = qs('#openDrawer');
    const $btnComments = qs('#openComments');
    const isDesktop = matchMedia('(hover:hover) and (pointer:fine)').matches;
    const isMobile  = matchMedia('(hover:none) and (pointer:coarse)').matches;

    function setOpen(el, btn, open){
      el.classList.toggle('open', open);
      el.setAttribute('aria-hidden', open ? 'false' : 'true');
      btn?.setAttribute('aria-expanded', open ? 'true' : 'false');
    }

    // ===== Menú
    const $closeDrawer = qs('#closeDrawer'); let drawerTimer = null;
    function openDrawer(){ setOpen($drawer,$btnDrawer,true); if(isMobile){ clearTimeout(drawerTimer); drawerTimer=setTimeout(()=>closeDrawer(),5000);} }
    function closeDrawer(){ setOpen($drawer,$btnDrawer,false); clearTimeout(drawerTimer); }
    $btnDrawer?.addEventListener('click', e=>{ e.stopPropagation(); ($drawer.classList.contains('open')?closeDrawer():openDrawer()); });
    $closeDrawer?.addEventListener('click', closeDrawer);
    if(isDesktop){ $btnDrawer?.addEventListener('mouseenter', openDrawer); $drawer?.addEventListener('mouseleave', closeDrawer); }
    document.addEventListener('click', e=>{ if($drawer.classList.contains('open') && !e.composedPath().includes($drawer) && !e.composedPath().includes($btnDrawer)) closeDrawer(); }, {passive:true});

    // ===== Comentarios (Utterances on demand)
    const $closeComments = qs('#closeComments');
    const $commentsMount = qs('#commentsMount');
    let commentsLoaded=false, inactivityTimer=null, lastActivity=Date.now();
    function injectUtterances(){
      if(commentsLoaded) return;
      const s=document.createElement('script');
      s.src='https://utteranc.es/client.js';
      s.setAttribute('repo','LucasMolina707/IngLucasLearningHub.github.io'); // cambia si usas otro repo
      s.setAttribute('issue-term','pathname');
      s.setAttribute('theme','icy-dark');
      s.setAttribute('crossorigin','anonymous');
      s.async=true;
      $commentsMount.appendChild(s);
      commentsLoaded=true;
    }
    function openComments(){ setOpen($comments,$btnComments,true); injectUtterances(); if(isDesktop) startInactivityWatcher(); }
    function closeComments(){ setOpen($comments,$btnComments,false); stopInactivityWatcher(); }
    $btnComments?.addEventListener('click', e=>{ e.stopPropagation(); ($comments.classList.contains('open')?closeComments():openComments()); });
    $closeComments?.addEventListener('click', closeComments);
    document.addEventListener('click', (e)=>{ if($comments.classList.contains('open') && !e.composedPath().includes($comments) && !e.composedPath().includes($btnComments)) closeComments(); }, {passive:true});
    function startInactivityWatcher(){ lastActivity=Date.now(); if(inactivityTimer) return; inactivityTimer=setInterval(()=>{ const idle=Date.now()-lastActivity, hov=$comments.matches(':hover'); if($comments.classList.contains('open') && idle>5000 && !hov){ closeComments(); } if(!$comments.classList.contains('open')) stopInactivityWatcher(); },500); }
    function stopInactivityWatcher(){ clearInterval(inactivityTimer); inactivityTimer=null; }
    ['mousemove','keydown','wheel','touchstart','touchmove'].forEach(evt=>document.addEventListener(evt,()=>{ lastActivity=Date.now(); },{passive:true}));

    // ===== I18N toggle (ES ↔ EN)
    (function(){
      const LANG_KEY='hubLang'; const $btn=qs('#langToggle'); const $chip=qs('#langChip');
      function setAriaForLang(L){
        const openCommentsBtn=qs('#openComments'); if(openCommentsBtn){ const t=L==='en'?'Open comments':'Abrir comentarios'; openCommentsBtn.title=t; openCommentsBtn.setAttribute('aria-label',t); }
        const openDrawerBtn=qs('#openDrawer'); if(openDrawerBtn){ const t=L==='en'?'Open menu':'Abrir menú'; openDrawerBtn.title=t; openDrawerBtn.setAttribute('aria-label',t); }
        const closeDrawerBtn=qs('#closeDrawer'); if(closeDrawerBtn){ closeDrawerBtn.setAttribute('aria-label', L==='en'?'Close':'Cerrar'); closeDrawerBtn.textContent = L==='en'?'Close ✕':'Cerrar ✕'; }
        const closeCommentsBtn=qs('#closeComments'); if(closeCommentsBtn){ closeCommentsBtn.setAttribute('aria-label', L==='en'?'Close comments':'Cerrar comentarios'); closeCommentsBtn.textContent = L==='en'?'Close ✕':'Cerrar ✕'; }
      }
      function applyLang(lang){
        const L=(lang==='en')?'en':'es';
        document.documentElement.setAttribute('data-lang',L);
        document.documentElement.setAttribute('lang',L);
        localStorage.setItem(LANG_KEY,L);
        $chip.textContent=L.toUpperCase();
        $btn.setAttribute('aria-label', L==='en'?'Switch language to Spanish':'Cambiar idioma a inglés');
        $btn.setAttribute('title', L==='en'?'Switch to Spanish':'Cambiar a English');
        $btn.setAttribute('aria-pressed', L==='en');
        setAriaForLang(L);
      }
      const saved=localStorage.getItem(LANG_KEY)||'es'; applyLang(saved);
      $btn?.addEventListener('click',()=>{ const cur=document.documentElement.getAttribute('data-lang')||'es'; applyLang(cur==='es'?'en':'es'); });
    })();

    // ===== Auto-menú (nav.json + fallback GitHub)
    (async function initAutoMenu(){
      const elPages = document.getElementById('nav-pages');
      const elProjects = document.getElementById('nav-projects');
      const CACHE_KEY='navjson-cache', MAX_AGE=24*60*60*1000;
      async function githubFallback(){
        try{
          const owner='LucasMolina707', repo='IngLucasLearningHub.github.io', branch='main';
          const api=`https://api.github.com/repos/${owner}/${repo}/git/trees/${branch}?recursive=1`;
          const r=await fetch(api); const j=await r.json();
          const files=(j.tree||[]).filter(x=>x.type==='blob' && x.path.endsWith('.html'));
          const skip=p=>p.startsWith('templates/')||p.startsWith('multimedia/')||p.startsWith('galeria/')||p.startsWith('assets/')||p.includes('/draft');
          const pretty=s=>s.replace(/\.html$/,'').split('/').pop().replace(/[-_]+/g,' ').replace(/\b\w/g,c=>c.toUpperCase());
          const pages=[], projects=[];
          for(const f of files){
            if(skip(f.path)) continue;
            const item={ href:'/'+f.path, label:pretty(f.path) };
            if (f.path==='index.html' || f.path==='contacto.html' || f.path==='politicas-privacidad.html' || !f.path.includes('/')) pages.push(item);
            else projects.push(item);
          }
          pages.sort((a,b)=>a.label.localeCompare(b.label,'es'));
          projects.sort((a,b)=>a.label.localeCompare(b.label,'es'));
          pages.sort((a,b)=> a.href.endsWith('/index.html')||a.href==='/index.html' ? -1 : b.href.endsWith('/index.html')||b.href==='/index.html' ? 1 : 0);
          return {pages,projects};
        }catch(e){ return {pages:[],projects:[]}; }
      }
      async function fetchNav(){
        try{
          const cached=localStorage.getItem(CACHE_KEY);
          if(cached){ const obj=JSON.parse(cached); if(Date.now()-obj.ts<MAX_AGE && obj.data) return obj.data; }
          const res=await fetch('/nav.json',{cache:'no-cache'});
          if(!res.ok) throw new Error('nav.json unavailable');
          const data=await res.json(); localStorage.setItem(CACHE_KEY, JSON.stringify({ts:Date.now(), data})); return data;
        }catch(e){ const data=await githubFallback(); localStorage.setItem(CACHE_KEY, JSON.stringify({ts:Date.now(), data})); return data; }
      }
      function renderList(container, list){ if(!container) return; container.innerHTML=list.map(i=>`<a href="${i.href}">${i.label}</a>`).join(''); }
      try{ const nav=await fetchNav(); renderList(elPages, nav.pages||[]); renderList(elProjects, nav.projects||[]); }catch(e){}
    })();

    // ===== Ojos siguen el mouse (y touch)
    (function(){
      const cat = document.getElementById('cat');
      const pL = document.getElementById('pL');
      const pR = document.getElementById('pR');

      function follow(clientX, clientY){
        const eyes = cat.querySelectorAll('.eye');
        eyes.forEach((eye, idx)=>{
          const pupil = idx===0 ? pL : pR;
          const rect = eye.getBoundingClientRect();
          const cx = rect.left + rect.width/2;
          const cy = rect.top  + rect.height/2;
          // vector hacia el puntero
          const dx = clientX - cx;
          const dy = clientY - cy;
          // limitar desplazamiento dentro del ojo
          const maxX = rect.width * 0.18;
          const maxY = rect.height* 0.18;
          const len = Math.hypot(dx, dy) || 1;
          const nx = dx/len, ny = dy/len;
          const tx = Math.max(-maxX, Math.min(maxX, nx * maxX));
          const ty = Math.max(-maxY, Math.min(maxY, ny * maxY));
          pupil.style.setProperty('--tx', tx.toFixed(1)+'px');
          pupil.style.setProperty('--ty', ty.toFixed(1)+'px');
        });
      }
      // eventos
      document.addEventListener('mousemove', (e)=> follow(e.clientX, e.clientY), {passive:true});
      document.addEventListener('touchmove', (e)=>{ const t=e.touches[0]; if(t) follow(t.clientX, t.clientY); }, {passive:true});
      // inicial al centro
      const r = cat.getBoundingClientRect(); follow(r.left+r.width/2, r.top+r.height/2);
    })();

    // ===== Estambre 30s + redirección
    (function(){
      const thread = document.getElementById('thread');
      const bar = document.getElementById('bar');
      const yarn = document.getElementById('yarn');
      const count = document.getElementById('count');
      const t0 = performance.now();
      let shown = 30;

      function update(now){
        const elapsed = now - t0;
        const pct = Math.min(1, elapsed / TOTAL_MS);
        const pctStr = (pct*100).toFixed(2)+'%';

        thread.style.setProperty('--pct', pctStr);
        bar.style.width = pctStr;
        thread.setAttribute('aria-valuenow', Math.round(pct*100));

        // rotación de la bola (rueda según avance)
        const rot = (pct*720)|0; // vueltas
        yarn.style.setProperty('--rot', rot+'deg');

        const remaining = Math.max(0, Math.ceil((TOTAL_MS - elapsed)/1000));
        if(remaining !== shown){
          shown = remaining;
          count.textContent = remaining;
        }

        if (elapsed >= TOTAL_MS){
          window.location.assign(HOME_URL);
        } else {
          requestAnimationFrame(update);
        }
      }
      count.textContent = 30;
      requestAnimationFrame(update);

      document.getElementById('goHome')?.addEventListener('click', (e)=>{ e.preventDefault(); window.location.assign(HOME_URL); });
    })();

    // Accesos rápidos CTA
    qs('#openCta')?.addEventListener('click', (e)=>{ e.preventDefault(); qs('#openComments')?.click(); });
    qs('#openMenu')?.addEventListener('click', ()=> qs('#openDrawer')?.click());
  </script>
</body>
</html>

